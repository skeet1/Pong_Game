// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id Int @id @default(autoincrement())
  username String @unique
  password String
  avatar  String
  status  Status @default(OFFLINE)
  win Int
  loss  Int
  ladder_level  Int
  created_date  DateTime @default(now())
  realtionSent Relation[] @relation("RelationPart1")
  realtionRecieved Relation[] @relation("RelationPart2")
  messagesSent  Message[] @relation("MessagesSent")
  messagesReceived  Message[] @relation("MessagesReceived")
}

model Achievement {
  id Int @id @default(autoincrement())
  user_id Int
  achievement_one String
  achievement_two String
  achievement_three String
}

model MatchHistory {
  id Int @id @default(autoincrement())
  winner_Id  Int
  loser_Id Int
  winner_score Int
  loser_score Int
  played_at DateTime @default(now())
}

model Message {
  id       Int    @id @default(autoincrement())
  content  String
  senderId Int
  receiverId Int
  createdAt DateTime @default(now())
  sender   User   @relation("MessagesSent", fields: [senderId], references: [id])
  receiver User   @relation("MessagesReceived", fields: [receiverId], references: [id])
}

model Relation {
  id Int @id @default(autoincrement())
  ruser1 Int
  ruser2 Int
  type Type
  createdAt DateTime @default(now())
  relationUserId1 User @relation("RelationPart1", fields: [ruser1], references: [id])
  relationUserId2 User @relation("RelationPart2", fields: [ruser2], references: [id])

}

enum Status {
  OFFLINE
  ONLINE
  INGAME
}

enum Type {
  NORELATION
  ONEFRIENDTWO
  TOWFRIENDONE
  ONEBLOCKTWO
  TWOBLOCKONE
}